<!DOCTYPE html>
<html lang="en">
<head>
	<title>Exercise 312</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css">
		/* DON'T CHANGE THIS CSS */
		body {margin: 0;}
		#page {width: 300px; margin: 0 auto;}

	</style>
</head>
<body>

<div id="page">
	<div id="header"></div>
	<div id="content"></div>
	<div id="footer"></div>
</div>

<script type="text/javascript">

	// ADD YOUR JS HERE

	// Create a new XHR request object:
	// Create a new XMLHttpRequest instance, and
	// define a readyState change handler for your new instance.

	// Deal with the response:
	// When you receive the response in your readyState handler,
	// then query the div#content element in the response object,
	// and inject the content into the div#content element in your page.

	// Make a request
	// Use the XHR.open and XHR.send methods to make a request to
	// http://class-test.local.
	// Use the XHR.responseType and set it to document
	// to return the response as Document object.

	var XHR = new XMLHttpRequest();
	// console.log(XHR);
	XHR.onreadystatechange = action_on_ready_state;
	console.log(XHR.responseType);
	XHR.responseType = "document";
	console.log(XHR.responseType);
	// RESULTS in blank responseType, when using "'document'".
	// "document" results in document in console.log, but doesn't recognise later in code, except when this.responseText is commented out.

	function action_on_ready_state() {
		// console.log("ready state changed");
		if(this.readyState == 4) {
			// this.responseText;
			// What does the above line do? Apart from break the code...?
			// console.log("ready state 4 achieved");
			// console.log(XHR.responseText);
			var content_div = XHR.response.getElementById("content");
			document.getElementById("content").appendChild(content_div);
			// console.log(XHR.status);
		}
	}

	XHR.open("GET", "http://hwd-01.local");
	XHR.send("");

</script>


</body>
</html>
